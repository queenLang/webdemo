<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			#box {
				width: 1000px;
				height: 600px;
				border: 1px solid black;
				position: relative;
			}
			
			#squre {
				width: 100px;
				height: 100px;
				background-color: lawngreen;
				position: absolute;
			}
			
			#middle {
				width: 200px;
				height: 200px;
				background-color: black;
				position: absolute;
				left: 400px;
				top: 200px;
			}
		</style>
	</head>

	<body>
		<div id="box">
			<div id="squre"></div>
			<div id="middle"></div>
		</div>

		<script type="text/javascript">
			var oBox = document.getElementById("box");
			var oMiddle = document.getElementById("middle");
			var oSqure = document.getElementById("squre");
			//在 box 的最大值
			var maxL = oBox.clientWidth - oSqure.clientWidth;
			var maxT = oBox.clientHeight - oSqure.clientHeight;
			//在 box 的最小值
			var minL = oMiddle.offsetLeft - oSqure.offsetLeft;
			var minT = oMiddle.offsetTop - oSqure.offsetTop;
			oSqure.onmousedown = function(ev) {
				var ev = ev || window.event;
				var X = ev.pageX - oSqure.offsetLeft;
				var Y = ev.pageY - oSqure.offsetTop;
				document.onmousemove = function(ev) {
					var ev = ev || window.event;
					var L = ev.pageX - X;
					var T = ev.pageY - Y;
					if(L < 0) {
						L = 0;
					}
					if(L > maxL) {
						L = maxL;
					}
					if(T < 0) {
						T = 0;
					}
					if(T > maxT) {
						T = maxT;
					}
					oSqure.style.left = L + "px"; 
					oSqure.style.top = T + "px"
				}
			}
		</script>
	</body>

</html>